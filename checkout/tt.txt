# Set up a webhook handler
    handler = StripeWH_Handler(request)
    # Map webhook events to relevant handler functions
    event_map = {
        'payment_intent.succeeded': handler.handle_payment_intent_succeeded,
        'payment_intent.payment_failed': handler.handle_payment_intent_payment_failed,
    }

    # Get the webhook type from Stripe
    event_type = event['type']

    # If there's a handler for it, get it from the event map
    # Use the generic one by default
    event_handler = event_map.get(event_type, handler.handle_event)

    # Call the event handler with the event
    response = event_handler(event)
    return response


    # print('Success!')
    # print('event>>>', event)
    # print('event.type>>>', event.type)
    # return HttpResponse(status=200)

    def handle_payment_intent_succeeded(self, event):
        """
        Handle the payment_intent.succeeded webhook from Stripe
        """
        print('handle_payment_intent_succeeded started...')
        intent = event.data.object
        print('intent>>', intent)
        return HttpResponse(
            content=f'Webhook received: {event["type"]}',
            status=200)

            ------------------------------
            <header class="container-fluid sticky-top topdown-color">
      <nav class="navbar navbar-expand-lg navbar-light bg-info sticky-top">
        <div class="container">
          <!-- Logo -->
          <a class="navbar-brand font-weight-bold text-black" href="{% url 'home' %}">
            ALMA-STORE
          </a>
          <!-- Mobile Hamburger Icon -->
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <!-- Navbar Links and Search -->
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-3">
              <li class="nav-item">
                <a class="nav-link text-black" href="{% url 'about' %}">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-black" href="{% url 'faqs' %}">Faqs</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-black" href="{% url 'product_reviews' %}">Reviews</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle text-black" href="#" id="allProductsDropdown" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">All Products</a>
                <div class="dropdown-menu" aria-labelledby="allProductsDropdown">
                  <a class="dropdown-item" href="{% url 'products' %}?sort=price&direction=asc">By Price</a>
                  <a class="dropdown-item" href="{% url 'products' %}?sort=rating&direction=desc">By Rating</a>
                  <a class="dropdown-item" href="{% url 'products' %}?sort=brand&direction=asc">By Brand</a>
                  <a class="dropdown-item" href="{% url 'products' %}">All Products</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle text-black" href="#" id="brandsDropdown" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">Brands</a>
                <div class="dropdown-menu" aria-labelledby="brandsDropdown">
                  <a class="dropdown-item" href="{% url 'products' %}?brand=dell">Dell</a>
                  <a class="dropdown-item" href="{% url 'products' %}?brand=apple">Apple</a>
                  <a class="dropdown-item" href="{% url 'products' %}?brand=lenovo">Lenovo</a>
                  <a class="dropdown-item" href="{% url 'products' %}?brand=hp">HP</a>
                  <a class="dropdown-item" href="{% url 'products' %}?brand=dell,apple,lenovo,hp">All Brands</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle text-black" href="#" id="specialsDropdown" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">Special Offers</a>
                <div class="dropdown-menu" aria-labelledby="specialsDropdown">
                  <a class="dropdown-item" href="{% url 'products' %}?brand=deals">Deals</a>
                  <a class="dropdown-item" href="{% url 'products' %}?brand=clearance">Clearance</a>
                  <a class="dropdown-item" href="{% url 'products' %}?brand=deals,clearance">All Specials</a>
                </div>
              </li>
          
            </ul>
           
                <form class="form-inline flex-grow-1 mx-2" method="GET" action="{% url 'products' %}">
                  <div class="input-group w-100">
                    <input class="form-control border border-black rounded-0 w-100" type="text" name="find"
                      placeholder="Search products..." aria-label="Search">
                    <div class="input-group-append">
                      <button class="btn btn-black border border-black rounded-0" type="submit">
                        <i class="fas fa-search"></i>
                      </button>
                    </div>
                  </div>
                </form>

            <!-- Account/Profile Menu and Cart -->
            <ul class="navbar-nav ml-3 align-items-center">
              <li class="nav-item dropdown mx-2">
                <a class="nav-link dropdown-toggle text-black" href="#" id="userOptions" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  <i class="fas fa-user fa-lg"></i> Accounts
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userOptions">
                  {% if request.user.is_authenticated %}
                    {% if request.user.is_superuser %}
                      <a href="{% url 'add_product' %}" class="dropdown-item">Product Management</a>
                    {% endif %}
                    <a href="{% url 'profile' %}" class="dropdown-item">My Profile</a>
                    <a href="{% url 'account_logout' %}" class="dropdown-item">Logout</a>
                  {% else %}
                    <a href="{% url 'account_signup' %}" class="dropdown-item">Register</a>
                    <a href="{% url 'account_login' %}" class="dropdown-item">Login</a>
                  {% endif %}
                </div>
              </li>
              <li class="nav-item mx-2">
                <a class="nav-link" href="{% url 'view_bag' %}">
                  <i class="fa-solid fa-cart-shopping fa-lg"></i>
                  <span>${% if grand_total %}{{ grand_total|floatformat:2 }}{% else %}0.00{% endif %}</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

   </header
   -------------------------
